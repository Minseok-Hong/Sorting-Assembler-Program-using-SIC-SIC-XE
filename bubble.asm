FIRST	STL	RETADR 
	LDT	#100
	LDB	#1	
MAIN	JSUB	RDREC
	LDT	LENGTH
	LDS	#1
	JSUB	BSTART

BSTART	CLEAR	X
	LDS	#1
	ADDR	S,X
BLOOP1S	STX	TEMPX
	CLEAR	X
BLOOP2S	CLEAR	A
	LDCH	BUFFER,X
	STA	TEMPCH
	CLEAR	T
	LDS	#1
	ADDR	S,X
	CLEAR	A
	LDCH	BUFFER,X
	STA	TEMPCH2
	CLEAR	S

	CLEAR	B
	LDB	#1
	SUBR	B,X

	LDS	TEMPCH2
	LDT	TEMPCH
	COMPR	T,S     .if
	JLT	BLOOP2E
	JEQ	BLOOP2E
	CLEAR	A
	LDCH	BUFFER,X
	STA	TEMP
	ADDR	B,X
	CLEAR	A
	LDCH	BUFFER,X
	STA	TMP
	SUBR	B,X
	CLEAR	A
	LDA	TMP	
	STCH	BUFFER,X
	CLEAR	A
	LDA	TEMP

	LDB	#1
	ADDR	B,X
	STCH	BUFFER,X
	JSUB	SWRREC

	CLEAR	A
	CLEAR	T
	LDA	TEMPX
	LDT	LENGTH
	SUBR	A,T
	TIXR	T
	JLT	BLOOP2S
BLOOP2E	LDT	LENGTH
	LDX	TEMPX
	SUBR	B,X
	TIXR	T
	JLT	BLOOP1S
	END	FIRST






RDREC	CLEAR	X
	CLEAR	A
	LDS	EOF
RLOOP	TD	INPUT
	JEQ	RLOOP
	RD	INPUT
	COMPR	A,S
	JEQ	REXIT
	STCH	BUFFER,X	
	TIXR	T
	JLT	RLOOP
REXIT	STX	LENGTH
	LDA	LENGTH
	RSUB

	
SWRREC	STX	SORTX
	CLEAR	X
	LDT	LENGTH
SWLOOP	CLEAR	A
	TD	OUTPUT
	JEQ	SWLOOP
	LDCH	BUFFER,X
	COMP	SP
	JEQ	SWEXITM
	WD	OUTPUT
	LDCH	#32
	WD	OUTPUT
SWEXITM	TIXR	T	
	JLT	SWLOOP
SWEXIT	LDCH	#10
	WD	OUTPUT
	LDX	SORTX
	RSUB


WRREC	CLEAR	X
	LDT	LENGTH	
WLOOP	CLEAR	A
	TD	OUTPUT	
	JEQ	WLOOP
	LDCH	BUFFER,X
	COMP	SP
	JEQ	WEXITM
	WD	OUTPUT
	LDCH	#32
	WD	OUTPUT
WEXITM	TIXR	T	
	JLT	WLOOP
WEXIT	RSUB



SORTX	RESW	1
ENTER	WORD	10
TEST	RESW	1
SP	WORD	32
TMP	RESW	1
TEMPCH2	RESW	1
TEMPCH	RESW	1
TMPX	RESW	1
TEMPX	RESW	1
TEMP	RESW	1
LENGTH	RESW	1
EOF	WORD	69
ONE	WORD	1
RETADR	RESW	1
BUFFER	RESW	4096
INPUT	BYTE	X'00'
OUTPUT	BYTE	X'01'
